<?xml version="1.0" encoding="UTF-8"?>
<!--
  Schema SIFEN v150 - Response Env√≠o de Eventos
  Archivo: resRecepEvento_v150.xsd
  Ubicaci√≥n: schemas/v150/official_set/webservices/events/
  
  PROP√ìSITO:
  - Define la estructura de respuesta del web service siRecepEvento
  - Valida el formato de respuesta enviado por SIFEN tras procesar eventos
  - Contiene resultado del procesamiento y registro del evento
  - Proporciona informaci√≥n de √©xito/error y datos de tracking
  
  FLUJO DE RESPUESTA:
  1. SIFEN recibe evento via siRecepEvento
  2. SIFEN valida estructura, firma digital y reglas de negocio
  3. SIFEN procesa evento seg√∫n su tipo (cancelaci√≥n, inutilizaci√≥n, etc.)
  4. SIFEN genera respuesta con este formato
  5. Cliente procesa respuesta y actualiza estado del evento
  
  TIPOS DE RESPUESTA:
  ‚úÖ Aprobado (0600) - Evento registrado correctamente
  üü° Aprobado con observaci√≥n (0601) - Registrado con warnings
  ‚ùå Rechazado (4xxx) - Errores de validaci√≥n espec√≠ficos por tipo evento
  ‚ö†Ô∏è Error t√©cnico (9xxx) - Problemas sistema SIFEN o infraestructura
  
  C√ìDIGOS ESPEC√çFICOS DE EVENTOS:
  - 4000-4019: Errores de cancelaci√≥n
  - 4050-4069: Errores de inutilizaci√≥n  
  - 4100-4139: Errores de eventos del receptor
  - 0600: Evento registrado exitosamente
  - 0601: Evento registrado con observaciones
  
  DIFERENCIAS CON DOCUMENTOS:
  - Procesamiento s√≠ncrono (respuesta inmediata)
  - Sin n√∫mero de autorizaci√≥n (protocolo simple)
  - Validaciones espec√≠ficas por tipo de evento
  - Sin firma digital en respuesta
  
  COMPATIBILIDAD:
  ‚úÖ SIFEN v150 oficial SET Paraguay
  ‚úÖ Protocolo SOAP 1.2
  ‚úÖ Est√°ndar W3C XML Schema 1.0
  ‚úÖ Compatible con todos los procesadores XSD
  
  Autor: Sistema SIFEN Paraguay
  Versi√≥n: 1.5.0
  Fecha: 2025-06-23
  Estado: Implementaci√≥n oficial SET
-->

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns="http://ekuatia.set.gov.py/sifen/xsd"
    targetNamespace="http://ekuatia.set.gov.py/sifen/xsd"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified"
    version="1.5.0">

    <!-- ===================================================================== -->
    <!-- IMPORTACIONES Y DEPENDENCIAS                                         -->
    <!-- ===================================================================== -->

    <!-- Tipos b√°sicos del sistema modular -->
    <xs:include schemaLocation="../../../modular/common/basic_types.xsd" />

    <!-- ===================================================================== -->
    <!-- TIPOS ESPEC√çFICOS PARA C√ìDIGOS DE RESPUESTA DE EVENTOS              -->
    <!-- ===================================================================== -->

    <!-- C√≥digos de resultado espec√≠ficos para eventos -->
    <xs:simpleType name="tipoCodigoResultadoEvento">
        <xs:annotation>
            <xs:documentation> C√≥digos de resultado espec√≠ficos para procesamiento de eventos SIFEN
                CATEGOR√çAS DE C√ìDIGOS: √âXITO (0600-0699): - 0600: Evento registrado correctamente -
                0601: Evento registrado con observaciones menores ERRORES DE CANCELACI√ìN
                (4000-4019): - 4000: Versi√≥n no corresponde - 4001: CDC inv√°lido o malformado -
                4002: CDC no existe en SIFEN - 4003: CDC ya tiene evento de cancelaci√≥n - 4004: CDC
                confirmado por receptor (no cancelable) - 4005: DTE no est√° aprobado - 4006:
                Firmador no autorizado para este emisor - 4007: Certificado revocado o inv√°lido -
                4008: Fecha firma inv√°lida o futura - 4009: Plazo FE extempor√°neo (>48h) - 4010:
                Plazo otros DE extempor√°neo (>168h) - 4011: Motivo cancelaci√≥n inv√°lido ERRORES DE
                INUTILIZACI√ìN (4050-4069): - 4050: Timbrado inv√°lido o inexistente - 4051: Timbrado
                no pertenece al emisor - 4052: Rango excede m√°ximo permitido (1000 n√∫meros) - 4053:
                N√∫meros ya utilizados en rango - 4054: Fecha l√≠mite timbrado excedida - 4055:
                Establecimiento no autorizado - 4056: Punto expedici√≥n no autorizado - 4057: Tipo
                documento incompatible con timbrado - 4058: Numeraci√≥n fuera de secuencia permitida
                - 4059: Plazo inutilizaci√≥n extempor√°neo (>15 d√≠as mes siguiente) ERRORES EVENTOS
                RECEPTOR (4100-4139): - 4100: Evento receptor fuera de plazo (>45 d√≠as) - 4101: CDC
                no dirigido al firmante del evento - 4102: Receptor no autorizado para este
                documento - 4103: Evento conflictivo con evento anterior - 4104: Conformidad parcial
                sin observaciones requeridas - 4105: Disconformidad sin motivo obligatorio - 4106:
                Desconocimiento sin justificaci√≥n - 4107: Fecha emisi√≥n document incorrecta - 4108:
                Evento duplicado ya registrado ERRORES T√âCNICOS (9000-9999): - 9000: Error interno
                del servidor SIFEN - 9001: Servicio de eventos temporalmente no disponible - 9002:
                Timeout en procesamiento de evento - 9003: Error en base de datos SIFEN - 9004:
                Error en validaci√≥n de firma digital VALIDACI√ìN: - C√≥digos son strings de 4 d√≠gitos
                - Cada c√≥digo tiene mensaje espec√≠fico asociado - Categorizaci√≥n por rango facilita
                manejo de errores - C√≥digos est√°n alineados con Manual T√©cnico SIFEN </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <!-- C√≥digos de √©xito -->
            <xs:enumeration value="0600">
                <xs:annotation>
                    <xs:documentation>Evento registrado correctamente</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="0601">
                <xs:annotation>
                    <xs:documentation>Evento registrado con observaciones</xs:documentation>
                </xs:annotation>
            </xs:enumeration>

            <!-- Errores de cancelaci√≥n (4000-4019) -->
            <xs:enumeration value="4000">
                <xs:annotation>
                    <xs:documentation>Versi√≥n no corresponde</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4001">
                <xs:annotation>
                    <xs:documentation>CDC inv√°lido</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4002">
                <xs:annotation>
                    <xs:documentation>CDC no existe en SIFEN</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4003">
                <xs:annotation>
                    <xs:documentation>CDC ya tiene evento de cancelaci√≥n</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4004">
                <xs:annotation>
                    <xs:documentation>CDC confirmado por receptor</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4009">
                <xs:annotation>
                    <xs:documentation>Plazo FE extempor√°neo (>48h)</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4010">
                <xs:annotation>
                    <xs:documentation>Plazo otros DE extempor√°neo (>168h)</xs:documentation>
                </xs:annotation>
            </xs:enumeration>

            <!-- Errores de inutilizaci√≥n (4050-4069) -->
            <xs:enumeration value="4052">
                <xs:annotation>
                    <xs:documentation>Rango excede m√°ximo (1000 n√∫meros)</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4053">
                <xs:annotation>
                    <xs:documentation>N√∫meros ya utilizados</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4059">
                <xs:annotation>
                    <xs:documentation>Plazo inutilizaci√≥n extempor√°neo</xs:documentation>
                </xs:annotation>
            </xs:enumeration>

            <!-- Errores eventos receptor (4100-4139) -->
            <xs:enumeration value="4100">
                <xs:annotation>
                    <xs:documentation>Evento receptor fuera de plazo (>45 d√≠as)</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="4108">
                <xs:annotation>
                    <xs:documentation>Evento duplicado</xs:documentation>
                </xs:annotation>
            </xs:enumeration>

            <!-- Errores t√©cnicos (9000-9999) -->
            <xs:enumeration value="9000">
                <xs:annotation>
                    <xs:documentation>Error interno del servidor</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="9001">
                <xs:annotation>
                    <xs:documentation>Servicio no disponible</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
        </xs:restriction>
    </xs:simpleType>

    <!-- Estado del resultado del evento -->
    <xs:simpleType name="tipoEstadoResultadoEvento">
        <xs:annotation>
            <xs:documentation> Estado final del procesamiento del evento VALORES POSIBLES: -
                Aprobado: Evento registrado exitosamente - Rechazado: Evento rechazado por
                validaciones - Error: Error t√©cnico durante procesamiento USO: - Aprobado: C√≥digos
                0600, 0601 - Rechazado: C√≥digos 4000-4999 - Error: C√≥digos 9000-9999 L√ìGICA DE
                NEGOCIO: - Solo eventos "Aprobados" se registran en SIFEN - Eventos "Rechazados"
                requieren correcci√≥n y reenv√≠o - Eventos "Error" pueden reintentarse sin cambios </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="Aprobado">
                <xs:annotation>
                    <xs:documentation>Evento registrado exitosamente</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="Rechazado">
                <xs:annotation>
                    <xs:documentation>Evento rechazado por validaciones</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="Error">
                <xs:annotation>
                    <xs:documentation>Error t√©cnico durante procesamiento</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
        </xs:restriction>
    </xs:simpleType>

    <!-- ID del evento en SIFEN -->
    <xs:simpleType name="tipoIdEventoSIFEN">
        <xs:annotation>
            <xs:documentation> Identificador √∫nico del evento asignado por SIFEN CARACTER√çSTICAS: -
                Asignado autom√°ticamente por SIFEN - √önico en todo el sistema - Usado para
                referencia futura - Solo presente en eventos aprobados FORMATO: String num√©rico de
                hasta 20 d√≠gitos EJEMPLO: "1234567890123456789" USO: - Tracking interno en SIFEN -
                Referencia en consultas posteriores - Correlaci√≥n en logs y auditor√≠a -
                Identificaci√≥n en reportes </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:pattern value="[0-9]{1,20}" />
        </xs:restriction>
    </xs:simpleType>

    <!-- N√∫mero de protocolo/transacci√≥n -->
    <xs:simpleType name="tipoNumeroProtocoloEvento">
        <xs:annotation>
            <xs:documentation> N√∫mero de protocolo de la transacci√≥n del evento PROP√ìSITO: -
                Identificaci√≥n √∫nica de la transacci√≥n - Correlaci√≥n entre request y response -
                Tracking para soporte t√©cnico - Referencia en logs SIFEN FORMATO: String num√©rico de
                hasta 15 d√≠gitos GENERACI√ìN: Autom√°tica por SIFEN PRESENCIA: Solo en respuestas
                exitosas EJEMPLO: "123456789012345" </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:pattern value="[0-9]{1,15}" />
        </xs:restriction>
    </xs:simpleType>

    <!-- ===================================================================== -->
    <!-- ESTRUCTURA PRINCIPAL DE LA RESPUESTA                                 -->
    <!-- ===================================================================== -->

    <!-- Elemento principal de la respuesta -->
    <xs:element name="rRetEnviEventoDe">
        <xs:annotation>
            <xs:documentation> Elemento ra√≠z de la respuesta del web service siRecepEvento
                ESTRUCTURA JER√ÅRQUICA: rRetEnviEventoDe (root) ‚îú‚îÄ‚îÄ dFecProc (Fecha procesamiento)
                ‚îî‚îÄ‚îÄ gResProcEVe (Grupo resultado procesamiento) ‚îú‚îÄ‚îÄ dEstRes (Estado resultado) ‚îú‚îÄ‚îÄ
                dProtAut (Protocolo autorizaci√≥n) ‚îú‚îÄ‚îÄ id (ID evento) ‚îî‚îÄ‚îÄ gResProc (Grupo resultado)
                ‚îú‚îÄ‚îÄ dCodRes (C√≥digo resultado) ‚îî‚îÄ‚îÄ dMsgRes (Mensaje resultado) FLUJO DE
                PROCESAMIENTO: 1. SIFEN recibe evento y asigna timestamp (dFecProc) 2. SIFEN valida
                estructura y reglas de negocio 3. SIFEN procesa evento seg√∫n tipo espec√≠fico 4.
                SIFEN genera resultado con c√≥digo y mensaje 5. SIFEN asigna ID y protocolo si
                exitoso 6. SIFEN env√≠a respuesta estructurada CASOS DE USO: ‚úÖ Cancelaci√≥n exitosa de
                factura ‚úÖ Inutilizaci√≥n de rango num√©rico aprobada ‚úÖ Confirmaci√≥n de recepci√≥n
                registrada ‚ùå Error de plazo en cancelaci√≥n ‚ùå Rango inutilizaci√≥n excede l√≠mite ‚ùå CDC
                no existe para evento receptor VALIDACIONES INCLUIDAS: - Timestamp de procesamiento
                v√°lido - Estado resultado coherente con c√≥digo - ID evento presente solo si aprobado
                - Mensaje descriptivo del resultado - Protocolo de transacci√≥n para tracking </xs:documentation>
        </xs:annotation>
        <xs:complexType>
            <xs:sequence>

                <!-- Fecha de procesamiento -->
                <xs:element name="dFecProc" type="tipoFechaHora">
                    <xs:annotation>
                        <xs:documentation> Fecha y hora de procesamiento del evento por SIFEN
                            CARACTER√çSTICAS: - Timestamp exacto del servidor SIFEN - Formato ISO
                            8601: YYYY-MM-DDTHH:mm:ss - Timezone: Local Paraguay (GMT-3) -
                            Precisi√≥n: Segundos PROP√ìSITO: - Registro temporal oficial del
                            procesamiento - Base para c√°lculos de tiempo - Auditor√≠a y trazabilidad
                            - Correlaci√≥n de logs EJEMPLO: "2025-06-23T14:35:22" VALIDACIONES: -
                            Debe ser timestamp v√°lido - No puede ser futura - Coherente con tiempo
                            de recepci√≥n - Usado para SLA y m√©tricas </xs:documentation>
                    </xs:annotation>
                </xs:element>

                <!-- Grupo resultado procesamiento evento -->
                <xs:element name="gResProcEVe">
                    <xs:annotation>
                        <xs:documentation> Grupo que contiene toda la informaci√≥n del resultado del
                            procesamiento COMPONENTES: - Estado del resultado
                            (Aprobado/Rechazado/Error) - Protocolo de autorizaci√≥n (si exitoso) - ID
                            del evento en SIFEN (si aprobado) - C√≥digo y mensaje espec√≠fico del
                            resultado L√ìGICA DE CONTENIDO: - Siempre presente: dEstRes, gResProc -
                            Solo si aprobado: dProtAut, id - C√≥digo determina mensaje
                            autom√°ticamente - Estado derivado del c√≥digo de resultado CASOS T√çPICOS:
                            1. √âxito: dEstRes="Aprobado", dProtAut presente, id presente 2. Error:
                            dEstRes="Rechazado", sin dProtAut, sin id 3. T√©cnico: dEstRes="Error",
                            sin dProtAut, sin id </xs:documentation>
                    </xs:annotation>
                    <xs:complexType>
                        <xs:sequence>

                            <!-- Estado del resultado -->
                            <xs:element name="dEstRes" type="tipoEstadoResultadoEvento">
                                <xs:annotation>
                                    <xs:documentation> Estado final del procesamiento del evento
                                        VALORES Y SIGNIFICADO: - "Aprobado": Evento registrado
                                        exitosamente en SIFEN - "Rechazado": Evento rechazado por
                                        validaciones de negocio - "Error": Error t√©cnico durante
                                        procesamiento DETERMINACI√ìN AUTOM√ÅTICA: - Aprobado: C√≥digos
                                        0600, 0601 - Rechazado: C√≥digos 4000-4999 - Error: C√≥digos
                                        9000-9999 ACCIONES SUGERIDAS: - Aprobado: Actualizar estado
                                        local, registrar √©xito - Rechazado: Revisar y corregir
                                        evento, reenviar - Error: Reintentar sin cambios o contactar
                                        soporte </xs:documentation>
                                </xs:annotation>
                            </xs:element>

                            <!-- N√∫mero de protocolo/autorizaci√≥n (opcional) -->
                            <xs:element name="dProtAut" type="tipoNumeroProtocoloEvento"
                                minOccurs="0">
                                <xs:annotation>
                                    <xs:documentation> N√∫mero de protocolo de autorizaci√≥n de la
                                        transacci√≥n PRESENCIA: Solo cuando dEstRes = "Aprobado"
                                        CARACTER√çSTICAS: - √önico por transacci√≥n en SIFEN - Generado
                                        autom√°ticamente - Usado para tracking y soporte - Referencia
                                        en logs internos FORMATO: Num√©rico hasta 15 d√≠gitos EJEMPLO:
                                        "1234567890123" USO: - Correlaci√≥n entre sistemas -
                                        Referencia en consultas posteriores - Debugging de
                                        transacciones - Soporte t√©cnico especializado NOTA:
                                        Diferente del ID del evento (id) </xs:documentation>
                                </xs:annotation>
                            </xs:element>

                            <!-- ID del evento (opcional) -->
                            <xs:element name="id" type="tipoIdEventoSIFEN" minOccurs="0">
                                <xs:annotation>
                                    <xs:documentation> Identificador √∫nico del evento asignado por
                                        SIFEN PRESENCIA: Solo cuando dEstRes = "Aprobado"
                                        CARACTER√çSTICAS: - √önico en todo el sistema SIFEN - Asignado
                                        secuencialmente por SIFEN - Permanente para el evento -
                                        Usado en consultas futuras FORMATO: Num√©rico hasta 20
                                        d√≠gitos EJEMPLO: "12345678901234567890" DIFERENCIAS: - id:
                                        Identificador del evento registrado - dProtAut: N√∫mero de
                                        transacci√≥n/protocolo - Id (atributo request): ID del
                                        cliente USO FUTURO: - Consultas espec√≠ficas del evento -
                                        Reportes y estad√≠sticas - Referencias en otros sistemas -
                                        Trazabilidad hist√≥rica </xs:documentation>
                                </xs:annotation>
                            </xs:element>

                            <!-- Grupo resultado espec√≠fico -->
                            <xs:element name="gResProc">
                                <xs:annotation>
                                    <xs:documentation> Grupo que contiene el c√≥digo y mensaje
                                        espec√≠fico del resultado COMPONENTES OBLIGATORIOS: -
                                        dCodRes: C√≥digo num√©rico espec√≠fico del resultado - dMsgRes:
                                        Mensaje descriptivo correspondiente al c√≥digo RELACI√ìN
                                        C√ìDIGO-MENSAJE: - Cada c√≥digo tiene mensaje oficial
                                        predefinido - Mensajes en espa√±ol seg√∫n Manual SIFEN -
                                        Coherencia autom√°tica entre c√≥digo y mensaje - Descripci√≥n
                                        espec√≠fica del error/√©xito EJEMPLOS: - 0600: "Evento
                                        registrado correctamente" - 4001: "CDC inv√°lido" - 4009:
                                        "Plazo de cancelaci√≥n extempor√°neo" - 9000: "Error interno
                                        del servidor" </xs:documentation>
                                </xs:annotation>
                                <xs:complexType>
                                    <xs:sequence>

                                        <!-- C√≥digo de resultado -->
                                        <xs:element name="dCodRes" type="tipoCodigoResultadoEvento">
                                            <xs:annotation>
                                                <xs:documentation> C√≥digo espec√≠fico del resultado
                                                    del procesamiento CATEGORIZACI√ìN: - 0600-0699:
                                                    √âxito y warnings - 4000-4019: Errores
                                                    cancelaci√≥n - 4050-4069: Errores inutilizaci√≥n -
                                                    4100-4139: Errores eventos receptor - 9000-9999:
                                                    Errores t√©cnicos C√ìDIGOS M√ÅS COMUNES: - 0600:
                                                    Evento registrado correctamente - 4001: CDC
                                                    inv√°lido - 4009: Plazo FE extempor√°neo (>48h) -
                                                    4052: Rango inutilizaci√≥n excede m√°ximo - 4100:
                                                    Evento receptor fuera de plazo USO EN C√ìDIGO:
                                                    ```python if codigo == "0600": # Evento exitoso
                                                    elif codigo.startswith("40"): # Error de
                                                    validaci√≥n elif codigo.startswith("90"): # Error
                                                    t√©cnico - reintentar ``` </xs:documentation>
                                            </xs:annotation>
                                        </xs:element>

                                        <!-- Mensaje de resultado -->
                                        <xs:element name="dMsgRes" type="tipoTextoLargo">
                                            <xs:annotation>
                                                <xs:documentation> Mensaje descriptivo del resultado
                                                    del procesamiento CARACTER√çSTICAS: - Texto
                                                    descriptivo oficial SIFEN - Espa√±ol, hasta 2000
                                                    caracteres - Corresponde exactamente al c√≥digo
                                                    dCodRes - Describe el problema espec√≠fico o
                                                    √©xito EJEMPLOS POR C√ìDIGO: - 0600: "Evento
                                                    registrado correctamente" - 4001: "CDC inv√°lido
                                                    o malformado" - 4002: "CDC no existe en SIFEN" -
                                                    4009: "Plazo de cancelaci√≥n extempor√°neo para
                                                    Factura Electr√≥nica" - 4052: "Rango de
                                                    inutilizaci√≥n excede el m√°ximo permitido de 1000
                                                    n√∫meros" - 4100: "Evento del receptor fuera del
                                                    plazo de 45 d√≠as" - 9000: "Error interno del
                                                    servidor SIFEN" USO: - Mostrar al usuario final
                                                    - Logging detallado - Debugging de integraciones
                                                    - Reportes de errores NOTA: Mensaje puede
                                                    incluir detalles espec√≠ficos del caso (ej: "CDC
                                                    01234... no existe") </xs:documentation>
                                            </xs:annotation>
                                        </xs:element>

                                    </xs:sequence>
                                </xs:complexType>
                            </xs:element>

                        </xs:sequence>
                    </xs:complexType>
                </xs:element>

            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <!-- ===================================================================== -->
    <!-- ELEMENTOS AUXILIARES PARA TESTING Y VALIDACI√ìN                      -->
    <!-- ===================================================================== -->

    <!-- Elemento para testing del schema de respuesta -->
    <xs:element name="testResponseEvento">
        <xs:annotation>
            <xs:documentation> Elemento auxiliar para testing del schema de response de eventos
                PROP√ìSITO: - Validaci√≥n de estructura antes de procesamiento - Testing de diferentes
                tipos de respuesta - Verificaci√≥n de coherencia c√≥digo-mensaje-estado - Debugging de
                respuestas SIFEN TESTS INCLUIDOS: - Respuestas exitosas (0600, 0601) - Errores de
                cancelaci√≥n (4000-4019) - Errores de inutilizaci√≥n (4050-4069) - Errores de eventos
                receptor (4100-4139) - Errores t√©cnicos (9000-9999) - Validaci√≥n de campos
                opcionales USO EN DESARROLLO: ```python # Validar respuesta SIFEN validator =
                XMLValidator("resRecepEvento_v150.xsd") is_valid = validator.validate(response_xml)
                if not is_valid: print("Error en respuesta SIFEN") ``` COMPATIBILIDAD: ‚úÖ XSD 1.0
                (est√°ndar SET Paraguay) ‚úÖ Parsers XML est√°ndar ‚úÖ Herramientas de validaci√≥n
                comerciales ‚úÖ IDEs con soporte XML Schema </xs:documentation>
        </xs:annotation>
        <xs:complexType>
            <xs:sequence>
                <!-- Test de respuesta exitosa -->
                <xs:element name="responseExitosa" minOccurs="0">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element ref="rRetEnviEventoDe" />
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>

                <!-- Test de respuesta con error -->
                <xs:element name="responseError" minOccurs="0">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element ref="rRetEnviEventoDe" />
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>

            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <!-- 
     ===================================================================== 
     EJEMPLOS DE RESPUESTAS T√çPICAS
     =====================================================================
     
     EJEMPLO 1: Respuesta Exitosa - Cancelaci√≥n Aprobada
     ```xml
     <rRetEnviEventoDe>
         <dFecProc>2025-06-23T14:35:22</dFecProc>
         <gResProcEVe>
             <dEstRes>Aprobado</dEstRes>
             <dProtAut>1234567890123</dProtAut>
             <id>12345678901234567890</id>
             <gResProc>
                 <dCodRes>0600</dCodRes>
                 <dMsgRes>Evento registrado correctamente</dMsgRes>
             </gResProc>
         </gResProcEVe>
     </rRetEnviEventoDe>
     ```
     
     EJEMPLO 2: Error - CDC Inv√°lido
     ```xml
     <rRetEnviEventoDe>
         <dFecProc>2025-06-23T14:35:25</dFecProc>
         <gResProcEVe>
             <dEstRes>Rechazado</dEstRes>
             <gResProc>
                 <dCodRes>4001</dCodRes>
                 <dMsgRes>CDC inv√°lido o malformado</dMsgRes>
             </gResProc>
         </gResProcEVe>
     </rRetEnviEventoDe>
     ```
     
     EJEMPLO 3: Error - Plazo Extempor√°neo Cancelaci√≥n FE
     ```xml
     <rRetEnviEventoDe>
         <dFecProc>2025-06-23T14:35:28</dFecProc>
         <gResProcEVe>
             <dEstRes>Rechazado</dEstRes>
             <gResProc>
                 <dCodRes>4009</dCodRes>
                 <dMsgRes>Plazo de cancelaci√≥n extempor√°neo para Factura Electr√≥nica (m√°ximo 48 horas)</dMsgRes>
             </gResProc>
         </gResProcEVe>
     </rRetEnviEventoDe>
     ```
     
     EJEMPLO 4: Error - Rango Inutilizaci√≥n Excedido
     ```xml
     <rRetEnviEventoDe>
         <dFecProc>2025-06-23T14:35:30</dFecProc>
         <gResProcEVe>
             <dEstRes>Rechazado</dEstRes>
             <gResProc>
                 <dCodRes>4052</dCodRes>
                 <dMsgRes>Rango de inutilizaci√≥n excede el m√°ximo permitido de 1000 n√∫meros</dMsgRes>
             </gResProc>
         </gResProcEVe>
     </rRetEnviEventoDe>
     ```
     
     EJEMPLO 5: Error T√©cnico - Servidor SIFEN
     ```xml
     <rRetEnviEventoDe>
         <dFecProc>2025-06-23T14:35:32</dFecProc>
         <gResProcEVe>
             <dEstRes>Error</dEstRes>
             <gResProc>
                 <dCodRes>9000</dCodRes>
                 <dMsgRes>Error interno del servidor SIFEN. Intente nuevamente en unos minutos</dMsgRes>
             </gResProc>
         </gResProcEVe>
     </rRetEnviEventoDe>
     ```
     
     EJEMPLO 6: Aprobado con Observaciones
     ```xml
     <rRetEnviEventoDe>
         <dFecProc>2025-06-23T14:35:35</dFecProc>
         <gResProcEVe>
             <dEstRes>Aprobado</dEstRes>
             <dProtAut>1234567890124</dProtAut>
             <id>12345678901234567891</id>
             <gResProc>
                 <dCodRes>0601</dCodRes>
                 <dMsgRes>Evento registrado correctamente con observaciones menores</dMsgRes>
             </gResProc>
         </gResProcEVe>
     </rRetEnviEventoDe>
     ```
     
     ===================================================================== 
     MANEJO DE RESPUESTAS EN C√ìDIGO
     =====================================================================
     
     CLASE PYTHON PARA PROCESAR RESPUESTAS:
     ```python
     from dataclasses import dataclass
     from typing import Optional
     from datetime import datetime
     
     @dataclass
     class ResultadoEventoSIFEN:
         exitoso: bool
         codigo: str
         mensaje: str
         fecha_procesamiento: datetime
         estado: str  # Aprobado/Rechazado/Error
         protocolo_autorizacion: Optional[str] = None
         id_evento_sifen: Optional[str] = None
         
         @property
         def es_aprobado(self) -> bool:
             return self.codigo in ["0600", "0601"] and self.estado == "Aprobado"
         
         @property
         def es_error_tecnico(self) -> bool:
             return self.codigo.startswith("9")
         
         @property
         def es_error_validacion(self) -> bool:
             return self.codigo.startswith("4")
         
         @property
         def puede_reintentar(self) -> bool:
             return self.es_error_tecnico
         
         @property
         def requiere_correccion(self) -> bool:
             return self.es_error_validacion
     
     def procesar_respuesta_evento(response_xml: str) -> ResultadoEventoSIFEN:
         """Procesa respuesta XML de SIFEN y retorna resultado estructurado"""
         import xml.etree.ElementTree as ET
         
         root = ET.fromstring(response_xml)
         ns = {"ns": "http://ekuatia.set.gov.py/sifen/xsd"}
         
         # Extraer datos principales
         fecha_proc = root.find("ns:dFecProc", ns).text
         grupo_resultado = root.find("ns:gResProcEVe", ns)
         
         estado = grupo_resultado.find("ns:dEstRes", ns).text
         protocolo_elem = grupo_resultado.find("ns:dProtAut", ns)
         id_evento_elem = grupo_resultado.find("ns:id", ns)
         
         grupo_res_proc = grupo_resultado.find("ns:gResProc", ns)
         codigo = grupo_res_proc.find("ns:dCodRes", ns).text
         mensaje = grupo_res_proc.find("ns:dMsgRes", ns).text
         
         return ResultadoEventoSIFEN(
             exitoso=estado == "Aprobado",
             codigo=codigo,
             mensaje=mensaje,
             fecha_procesamiento=datetime.fromisoformat(fecha_proc),
             estado=estado,
             protocolo_autorizacion=protocolo_elem.text if protocolo_elem is not None else None,
             id_evento_sifen=id_evento_elem.text if id_evento_elem is not None else None
         )
     
     # Ejemplo de uso
     def manejar_respuesta_cancelacion(response_xml: str):
         resultado = procesar_respuesta_evento(response_xml)
         
         if resultado.es_aprobado:
             print(f"‚úÖ Cancelaci√≥n aprobada!")
             print(f"   ID Evento SIFEN: {resultado.id_evento_sifen}")
             print(f"   Protocolo: {resultado.protocolo_autorizacion}")
             # Actualizar estado local del documento
             
         elif resultado.es_error_validacion:
             print(f"‚ùå Error de validaci√≥n: {resultado.mensaje}")
             print(f"   C√≥digo: {resultado.codigo}")
             # Revisar y corregir evento antes de reenviar
             
         elif resultado.es_error_tecnico:
             print(f"‚ö†Ô∏è Error t√©cnico: {resultado.mensaje}")
             print(f"   C√≥digo: {resultado.codigo}")
             # Reintentar sin cambios despu√©s de un tiempo
             
         return resultado
     ```
     
     ===================================================================== 
     C√ìDIGOS DE ERROR DETALLADOS Y ACCIONES RECOMENDADAS
     =====================================================================
     
     CANCELACI√ìN (4000-4019):
     4000 - Versi√≥n no corresponde ‚Üí Verificar dVerFor="150"
     4001 - CDC inv√°lido ‚Üí Validar formato CDC (44 d√≠gitos)
     4002 - CDC no existe ‚Üí Verificar que CDC est√© aprobado en SIFEN
     4003 - CDC ya cancelado ‚Üí El evento ya existe, no reenviar
     4004 - CDC confirmado por receptor ‚Üí No se puede cancelar
     4009 - Plazo FE extempor√°neo ‚Üí M√°ximo 48h desde aprobaci√≥n
     4010 - Plazo otros extempor√°neo ‚Üí M√°ximo 168h desde aprobaci√≥n
     
     INUTILIZACI√ìN (4050-4069):
     4052 - Rango excede m√°ximo ‚Üí M√°ximo 1000 n√∫meros por evento
     4053 - N√∫meros ya utilizados ‚Üí Verificar disponibilidad n√∫meros
     4059 - Plazo extempor√°neo ‚Üí M√°ximo 15 d√≠as del mes siguiente
     
     EVENTOS RECEPTOR (4100-4139):
     4100 - Fuera de plazo ‚Üí M√°ximo 45 d√≠as desde emisi√≥n
     4108 - Evento duplicado ‚Üí El evento ya fue registrado
     
     T√âCNICOS (9000-9999):
     9000 - Error servidor ‚Üí Reintentar en 5-10 minutos
     9001 - Servicio no disponible ‚Üí Verificar estado SIFEN
     
     ===================================================================== 
     INTEGRACI√ìN CON WEB SERVICE COMPLETO
     =====================================================================
     
     Este schema se integra con:
     - siRecepEvento_v150.xsd (Request)
     - WS_SiRecepEvento_v150.xsd (Web Service completo)
     - Evento_v150.xsd (Estructura de eventos)
     
     Flujo completo:
     1. Cliente: Crear evento (Evento_v150.xsd)
     2. Cliente: Enviar evento (siRecepEvento_v150.xsd)
     3. SIFEN: Procesar y responder (resRecepEvento_v150.xsd) ‚Üê ESTE ARCHIVO
     4. Cliente: Procesar respuesta y actualizar estado
     
     =====================================================================
    -->

</xs:schema>