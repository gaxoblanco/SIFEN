<?xml version="1.0" encoding="UTF-8"?>
<!--
  Schema SIFEN v150 - Response Consulta RUC Contribuyente
  Archivo: resConsRUC_v150.xsd
  Ubicaci√≥n: schemas/v150/official_set/webservices/queries/
  
  PROP√ìSITO:
  - Define la estructura del response para consultas de RUC contribuyente
  - Proporciona informaci√≥n completa del contribuyente si es encontrado
  - Maneja casos de √©xito, error y RUC no encontrado
  - Facilita la validaci√≥n de contrapartes comerciales
  
  OPERACI√ìN:
  - Web Service: SiConsRUC (consulta RUC)
  - Correlaci√≥n: Respuesta a siConsRUC_v150.xsd request
  - Endpoint: https://sifen.set.gov.py/de/ws/consultas/consulta.wsdl
  - Test: https://sifen-test.set.gov.py/de/ws/consultas/consulta.wsdl
  
  C√ìDIGOS DE RESPUESTA PRINCIPALES:
  - 0420: "Consulta realizada correctamente" (RUC encontrado)
  - 0430: "RUC no encontrado en el sistema" (RUC no existe)
  - 0500: "Error interno del servidor" (error temporal)
  - 0600: "Error de validaci√≥n del request" (request malformado)
  
  ESTADOS DEL CONTRIBUYENTE:
  - 1: Activo (puede emitir documentos electr√≥nicos)
  - 2: Suspendido (temporalmente inhabilitado)
  - 3: Cancelado (dado de baja definitivamente)
  - 4: Bloqueado (inhabilitado por incumplimientos)
  
  TIPOS DE CONTRIBUYENTE:
  - 1: Persona f√≠sica (trabajador independiente, profesional)
  - 2: Persona jur√≠dica (empresa, sociedad, organizaci√≥n)
  
  CASOS DE USO PRINCIPALES:
  1. Validaci√≥n de RUC de receptores antes de emitir documentos
  2. Verificaci√≥n de estado de contrapartes comerciales
  3. Obtenci√≥n de datos oficiales para integraci√≥n contable
  4. Auditor√≠a y control de operaciones comerciales
  5. Validaci√≥n pre-env√≠o de documentos electr√≥nicos
  
  ESTRUCTURA CONDICIONAL:
  - gResProcConsRUC: Solo presente si dCodRes = "0420" (RUC encontrado)
  - Todos los campos dentro del grupo son obligatorios si el grupo est√° presente
  - Fechas en formato ISO 8601 est√°ndar
  
  IMPLEMENTACI√ìN RECOMENDADA:
  ```python
  # Ejemplo procesamiento response
  def procesar_consulta_ruc(response_xml: str) -> dict:
      tree = parse_xml(response_xml)
      codigo = tree.find('.//dCodRes').text
      
      if codigo == '0420':
          # RUC encontrado
          datos_ruc = extraer_datos_contribuyente(tree)
          return {'encontrado': True, 'contribuyente': datos_ruc}
      elif codigo == '0430':
          # RUC no encontrado
          return {'encontrado': False, 'motivo': 'RUC no existe'}
      else:
          # Error en consulta
          mensaje = tree.find('.//dMsgRes').text
          return {'error': True, 'codigo': codigo, 'mensaje': mensaje}
  ```
  
  INTEGRACI√ìN CON SCHEMAS:
  - Request: siConsRUC_v150.xsd
  - Validaci√≥n RUC: basic_types.xsd (referencia)
  - Tipos compartidos: common_types.xsd
  
  Autor: [Sistema]
  Fecha: 2024-06-24
  Versi√≥n: 1.5.0
  Manual: T√©cnico SIFEN v150 - Secci√≥n 4.6.2
-->

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://ekuatia.set.gov.py/sifen/xsd"
    xmlns:tns="http://ekuatia.set.gov.py/sifen/xsd"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified"
    version="1.5.0">

    <!-- ===================================================================== -->
    <!-- IMPORTS Y ANOTACIONES GLOBALES                                       -->
    <!-- ===================================================================== -->

    <xs:annotation>
        <xs:documentation> Schema SIFEN v150 - Response Consulta RUC Contribuyente ESTRUCTURA
            JER√ÅRQUICA: rRetEnviConsRUC (Ra√≠z) ‚îú‚îÄ‚îÄ dFecProc (Timestamp procesamiento SIFEN) ‚îú‚îÄ‚îÄ
            dCodRes (C√≥digo resultado: 0420, 0430, etc.) ‚îú‚îÄ‚îÄ dMsgRes (Mensaje descriptivo resultado)
            ‚îî‚îÄ‚îÄ gResProcConsRUC (Datos RUC - solo si encontrado) ‚îú‚îÄ‚îÄ dRUC/dDV (RUC y d√≠gito
            verificador) ‚îú‚îÄ‚îÄ dNomCont (Nombre/raz√≥n social contribuyente) ‚îú‚îÄ‚îÄ cEstCont/dDesEstCont
            (Estado y descripci√≥n) ‚îú‚îÄ‚îÄ cTipCont/dDesTipCont (Tipo contribuyente) ‚îî‚îÄ‚îÄ dFecActEst
            (Fecha actualizaci√≥n estado) INTERPRETACI√ìN DE C√ìDIGOS: - 0420: RUC encontrado y datos
            incluidos - 0430: RUC v√°lido pero no existe en padrones SET - 05xx: Error de
            autenticaci√≥n/certificado - 99xx: Error t√©cnico temporal del servidor VALIDACIONES
            AUTOM√ÅTICAS: - Correlaci√≥n con ID del request original - Formato de timestamp de
            procesamiento - Coherencia entre c√≥digo y presencia de datos - Validaci√≥n de estados y
            tipos seg√∫n cat√°logos oficiales CASOS ESPECIALES DE MANEJO: 1. RUC encontrado:
            gResProcConsRUC presente con todos los datos 2. RUC no encontrado: Solo datos de control
            (sin gResProcConsRUC) 3. Error temporal: Reintentar consulta despu√©s de tiempo de espera
            4. RUC inactivo: Datos presentes pero estado ‚â† 1 (Activo) </xs:documentation>
    </xs:annotation>

    <!-- ===================================================================== -->
    <!-- ELEMENTO RA√çZ DEL RESPONSE                                            -->
    <!-- ===================================================================== -->

    <xs:element name="rRetEnviConsRUC" type="tns:tipoResponseConsultaRUC">
        <xs:annotation>
            <xs:documentation> Elemento ra√≠z para el response de consulta de RUC contribuyente
                CONTENIDO FIJO: - dFecProc: Timestamp del procesamiento en SIFEN - dCodRes: C√≥digo
                de resultado espec√≠fico - dMsgRes: Mensaje descriptivo del resultado CONTENIDO
                CONDICIONAL: - gResProcConsRUC: Datos del contribuyente (solo si dCodRes = "0420")
                CORRELACI√ìN: - Respuesta directa a request siConsRUC_v150.xsd - ID de control debe
                coincidir con request original EJEMPLO RUC ENCONTRADO: ```xml <rRetEnviConsRUC
                    xmlns="http://ekuatia.set.gov.py/sifen/xsd">
                    <dFecProc>2024-06-24T15:30:45-03:00</dFecProc>
                    <dCodRes>0420</dCodRes>
                    <dMsgRes>Consulta realizada correctamente</dMsgRes>
                    <gResProcConsRUC>
                        <dRUC>12345678</dRUC>
                        <dDV>9</dDV>
                        <dNomCont>Empresa Ejemplo Sociedad An√≥nima</dNomCont>
                        <cEstCont>1</cEstCont>
                        <dDesEstCont>Activo</dDesEstCont>
                        <cTipCont>2</cTipCont>
                        <dDesTipCont>Persona Jur√≠dica</dDesTipCont>
                        <dFecActEst>2024-01-15</dFecActEst>
                    </gResProcConsRUC>
                </rRetEnviConsRUC>
                ``` EJEMPLO RUC NO ENCONTRADO: ```xml <rRetEnviConsRUC
                    xmlns="http://ekuatia.set.gov.py/sifen/xsd">
                    <dFecProc>2024-06-24T15:30:45-03:00</dFecProc>
                    <dCodRes>0430</dCodRes>
                    <dMsgRes>RUC no encontrado en el sistema</dMsgRes>
                    <!-- Sin gResProcConsRUC -->
                </rRetEnviConsRUC>
                ``` </xs:documentation>
        </xs:annotation>
    </xs:element>

    <!-- ===================================================================== -->
    <!-- TIPO COMPLEJO PRINCIPAL                                               -->
    <!-- ===================================================================== -->

    <xs:complexType name="tipoResponseConsultaRUC">
        <xs:annotation>
            <xs:documentation> Tipo complejo que define la estructura completa del response CAMPOS
                OBLIGATORIOS (siempre presentes): - dFecProc: Fecha y hora del procesamiento en
                SIFEN - dCodRes: C√≥digo espec√≠fico del resultado - dMsgRes: Mensaje descriptivo del
                c√≥digo CAMPOS CONDICIONALES: - gResProcConsRUC: Datos del contribuyente (solo si
                c√≥digo = 0420) L√ìGICA DE NEGOCIO: - Si dCodRes = "0420": gResProcConsRUC DEBE estar
                presente - Si dCodRes ‚â† "0420": gResProcConsRUC NO debe estar presente - Todos los
                campos son validados seg√∫n tipos espec√≠ficos PROCESAMIENTO RECOMENDADO: 1. Verificar
                dCodRes para determinar √©xito/fallo 2. Si √©xito (0420): procesar datos en
                gResProcConsRUC 3. Si fallo: usar dMsgRes para manejo de errores 4. Loggar siempre
                dFecProc para auditor√≠a </xs:documentation>
        </xs:annotation>

        <xs:sequence>

            <!-- Fecha y hora de procesamiento -->
            <xs:element name="dFecProc" type="tns:tipoTimestampProcesamientoRUC">
                <xs:annotation>
                    <xs:documentation> Fecha y hora exacta del procesamiento en SIFEN
                        CARACTER√çSTICAS: - Tipo: DateTime con timezone - Formato: ISO 8601 completo
                        (YYYY-MM-DDThh:mm:ss¬±TZ) - Timezone: America/Asuncion (-03:00 est√°ndar,
                        -04:00 DST) - Precisi√≥n: Segundos (sin milisegundos) PROP√ìSITO: - Timestamp
                        oficial del procesamiento - Auditor√≠a y trazabilidad de operaciones -
                        Correlaci√≥n temporal con logs SIFEN - Verificaci√≥n de tiempos de respuesta
                        VALIDACIONES: - Fecha no puede ser futura - Debe incluir timezone v√°lido de
                        Paraguay - Formato estricto ISO 8601 EJEMPLOS V√ÅLIDOS: -
                        2024-06-24T15:30:45-03:00 (horario est√°ndar) - 2024-12-15T09:15:30-04:00
                        (horario de verano) USO EN CACHE: Usar este timestamp para determinar
                        validez de datos en cache de RUC consultados </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- C√≥digo de resultado -->
            <xs:element name="dCodRes" type="tns:tipoCodigoResultadoRUC">
                <xs:annotation>
                    <xs:documentation> C√≥digo espec√≠fico del resultado de la consulta RUC C√ìDIGOS
                        PRINCIPALES: üü¢ √âXITO: - 0420: "Consulta realizada correctamente" RUC
                        encontrado y datos incluidos üü° RUC NO ENCONTRADO: - 0430: "RUC no
                        encontrado en el sistema" RUC v√°lido pero no existe en padrones SET üî¥
                        ERRORES DE VALIDACI√ìN: - 0600: "Error de validaci√≥n del request" Request
                        malformado o RUC/DV inv√°lido - 0610: "Par√°metros de consulta inv√°lidos"
                        Formato de RUC incorrecto o DV no corresponde üî¥ ERRORES DE AUTENTICACI√ìN: -
                        0500: "Error de autenticaci√≥n" Certificado PSC inv√°lido o expirado - 0510:
                        "Acceso no autorizado" Sin permisos para consultar RUC üî¥ ERRORES T√âCNICOS:
                        - 9900: "Error interno del servidor" Error temporal, reintentar - 9910:
                        "Servicio temporalmente no disponible" Mantenimiento programado MANEJO
                        PROGRAM√ÅTICO: ```python def manejar_codigo_respuesta_ruc(codigo: str): if
                        codigo == '0420': return 'EXITO_RUC_ENCONTRADO' elif codigo == '0430':
                        return 'RUC_NO_ENCONTRADO' elif codigo.startswith('06'): return
                        'ERROR_VALIDACION' elif codigo.startswith('05'): return
                        'ERROR_AUTENTICACION' elif codigo.startswith('99'): return 'ERROR_TEMPORAL'
                        else: return 'ERROR_DESCONOCIDO' ``` IMPLICACIONES DE NEGOCIO: - 0420 +
                        cEstCont=1: RUC activo, puede operar - 0420 + cEstCont‚â†1: RUC existe pero
                        inactivo - 0430: RUC no existe, verificar digitaci√≥n </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- Mensaje descriptivo -->
            <xs:element name="dMsgRes" type="tns:tipoMensajeResultadoRUC">
                <xs:annotation>
                    <xs:documentation> Mensaje descriptivo que complementa el c√≥digo de resultado
                        CARACTER√çSTICAS: - Texto en espa√±ol legible para humanos - Longitud variable
                        (10-200 caracteres t√≠pico) - Coherente con el c√≥digo dCodRes - Sin
                        informaci√≥n sensible del contribuyente MENSAJES T√çPICOS POR C√ìDIGO: - 0420:
                        "Consulta realizada correctamente" - 0430: "RUC no encontrado en el sistema"
                        - 0600: "Error de validaci√≥n del request" - 0610: "D√≠gito verificador
                        incorrecto para el RUC" - 0500: "Error de autenticaci√≥n del certificado" -
                        9900: "Error interno del servidor, intente nuevamente" PROP√ìSITO: -
                        Informaci√≥n legible para usuarios finales - Contexto adicional para
                        debugging - Mensajes para mostrar en interfaces - Logs y auditor√≠a
                        descriptiva USO RECOMENDADO: - Para UI: Mostrar al usuario final - Para
                        logs: Complementar el c√≥digo t√©cnico - Para debugging: Informaci√≥n adicional
                        del error - No usar para l√≥gica de negocio (usar dCodRes) NOTA IMPORTANTE:
                        El contenido exacto puede variar entre versiones de SIFEN, siempre usar
                        dCodRes para l√≥gica de negocio </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- Datos del RUC consultado (condicional) -->
            <xs:element name="gResProcConsRUC" type="tns:tipoInformacionContribuyente" minOccurs="0">
                <xs:annotation>
                    <xs:documentation> Grupo con informaci√≥n del contribuyente consultado
                        CONDICIONALIDAD ESTRICTA: - PRESENTE: Solo cuando dCodRes = "0420" -
                        AUSENTE: En cualquier otro c√≥digo de resultado - OBLIGATORIO: Si RUC existe
                        en padrones SET CONTENIDO INCLUIDO: - RUC y d√≠gito verificador
                        (confirmaci√≥n) - Nombre o raz√≥n social oficial - Estado actual del
                        contribuyente - Tipo de contribuyente (f√≠sica/jur√≠dica) - Fecha de √∫ltima
                        actualizaci√≥n de estado INFORMACI√ìN EXCLUIDA (no incluida): - Direcci√≥n
                        fiscal del contribuyente - Actividades econ√≥micas espec√≠ficas - Informaci√≥n
                        de contacto (tel√©fono, email) - Datos bancarios o financieros - Historial de
                        cambios de estado VALIDACI√ìN AUTOM√ÅTICA: - Parser debe verificar coherencia:
                        c√≥digo 0420 = datos presentes - Todos los subcampos son obligatorios si el
                        grupo est√° presente - RUC y DV deben coincidir con los del request - Estado
                        debe ser v√°lido seg√∫n cat√°logo oficial USO T√çPICO: ```python if
                        response.dCodRes == '0420': contribuyente = response.gResProcConsRUC
                        print(f"Contribuyente: {contribuyente.dNomCont}") print(f"RUC:
                        {contribuyente.dRUC}-{contribuyente.dDV}") print(f"Estado:
                        {contribuyente.dDesEstCont}") print(f"Tipo: {contribuyente.dDesTipCont}") #
                        Verificar si puede operar puede_operar = contribuyente.cEstCont == '1' ``` </xs:documentation>
                </xs:annotation>
            </xs:element>

        </xs:sequence>

        <!-- Atributo de versi√≥n -->
        <xs:attribute name="version" type="xs:string" fixed="1.5.0">
            <xs:annotation>
                <xs:documentation> Versi√≥n del schema de response utilizado VALOR FIJO: "1.5.0"
                    PROP√ìSITO: Identificar versi√≥n para compatibilidad y parsing USO: Autom√°tico por
                    el sistema </xs:documentation>
            </xs:annotation>
        </xs:attribute>

    </xs:complexType>

    <!-- ===================================================================== -->
    <!-- TIPO COMPLEJO PARA INFORMACI√ìN DEL CONTRIBUYENTE                     -->
    <!-- ===================================================================== -->

    <xs:complexType name="tipoInformacionContribuyente">
        <xs:annotation>
            <xs:documentation> Informaci√≥n oficial del contribuyente desde padrones SET PROP√ìSITO: -
                Proporcionar datos oficiales y actualizados del contribuyente - Permitir
                verificaci√≥n de estado para operaciones comerciales - Facilitar validaci√≥n de
                contrapartes comerciales - Mostrar informaci√≥n fiscalmente relevante CAMPOS
                INCLUIDOS: Todos los campos son obligatorios si el grupo est√° presente. La
                informaci√≥n refleja el estado actual en padrones SET. ACTUALIZACI√ìN: Los datos se
                obtienen en tiempo real del sistema SET, reflejando el estado m√°s actual del
                contribuyente. NOTA DE PRIVACIDAD: Solo incluye informaci√≥n p√∫blica disponible en
                padrones. No incluye datos privados o sensibles del contribuyente. </xs:documentation>
        </xs:annotation>

        <xs:sequence>

            <!-- RUC del contribuyente -->
            <xs:element name="dRUC" type="tns:tipoRUCContribuyente">
                <xs:annotation>
                    <xs:documentation> RUC del contribuyente (confirmaci√≥n del request)
                        CARACTER√çSTICAS: - Longitud: Exactamente 8 d√≠gitos num√©ricos - Sin guiones
                        ni separadores - Sin d√≠gito verificador (se incluye en dDV) - Debe coincidir
                        exactamente con el RUC del request PROP√ìSITO: - Confirmaci√≥n del RUC
                        consultado - Verificaci√≥n de coherencia request-response - Identificaci√≥n
                        √∫nica del contribuyente - Base para c√°lculos de validaci√≥n VALIDACI√ìN: -
                        Debe coincidir 100% con RUC del request - Solo d√≠gitos 0-9 - Longitud exacta
                        8 caracteres EJEMPLO: 12345678 </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- D√≠gito verificador -->
            <xs:element name="dDV" type="tns:tipoDigitoVerificadorContribuyente">
                <xs:annotation>
                    <xs:documentation> D√≠gito verificador del RUC (confirmaci√≥n del request)
                        CARACTER√çSTICAS: - Longitud: 1 d√≠gito num√©rico (0-9) - Calculado con
                        algoritmo m√≥dulo 11 - Debe coincidir exactamente con el DV del request -
                        Verificaci√≥n autom√°tica de integridad PROP√ìSITO: - Confirmaci√≥n del DV
                        consultado - Verificaci√≥n de coherencia - Validaci√≥n de integridad del RUC
                        VALIDACI√ìN: - Debe coincidir 100% con DV del request - Algoritmo m√≥dulo 11
                        aplicado correctamente EJEMPLO: 9 (para RUC 12345678) </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- Nombre del contribuyente -->
            <xs:element name="dNomCont" type="tns:tipoNombreContribuyente">
                <xs:annotation>
                    <xs:documentation> Nombre o raz√≥n social oficial del contribuyente
                        CARACTER√çSTICAS: - Longitud: 4-200 caracteres - Texto libre alfanum√©rico -
                        Seg√∫n registro oficial en padrones SET - Puede incluir denominaciones
                        comerciales CONTENIDO: - Personas f√≠sicas: Nombre completo oficial -
                        Personas jur√≠dicas: Raz√≥n social registrada - Incluye denominaciones
                        oficiales completas - Sin abreviaciones no autorizadas ACTUALIZACI√ìN: -
                        Refleja √∫ltima actualizaci√≥n en padrones SET - Puede diferir de
                        denominaciones comerciales - Informaci√≥n oficial para documentos fiscales
                        EJEMPLOS: - "Juan Carlos P√©rez Gonz√°lez" (persona f√≠sica) - "Empresa Ejemplo
                        Sociedad An√≥nima" (persona jur√≠dica) - "Cooperativa de Servicios M√∫ltiples
                        Ltda." (cooperativa) </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- Estado del contribuyente -->
            <xs:element name="cEstCont" type="tns:tipoCodigoEstadoContribuyente">
                <xs:annotation>
                    <xs:documentation> C√≥digo del estado actual del contribuyente en SET VALORES
                        POSIBLES: - 1: Activo (puede operar normalmente) - 2: Suspendido
                        (temporalmente inhabilitado) - 3: Cancelado (dado de baja definitivamente) -
                        4: Bloqueado (inhabilitado por incumplimientos) IMPLICACIONES OPERATIVAS: -
                        Estado 1: Puede emitir y recibir documentos electr√≥nicos - Estado 2:
                        Operaciones limitadas, revisar situaci√≥n - Estado 3: No puede operar, baja
                        definitiva - Estado 4: Inhabilitado, resolver incumplimientos ACTUALIZACI√ìN:
                        - Refleja estado actual en tiempo real - Puede cambiar por gestiones
                        administrativas - Informaci√≥n cr√≠tica para operaciones comerciales USO
                        RECOMENDADO: ```python if contribuyente.cEstCont == '1': # Puede operar
                        normalmente proceder_con_operacion() else: # Verificar situaci√≥n antes de
                        operar alertar_estado_irregular() ``` EJEMPLO: 1 (Activo) </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- Descripci√≥n del estado -->
            <xs:element name="dDesEstCont" type="tns:tipoDescripcionEstadoContribuyente">
                <xs:annotation>
                    <xs:documentation> Descripci√≥n textual del estado del contribuyente VALORES
                        CORRESPONDIENTES: - "Activo": Para cEstCont = 1 - "Suspendido": Para
                        cEstCont = 2 - "Cancelado": Para cEstCont = 3 - "Bloqueado": Para cEstCont =
                        4 CARACTER√çSTICAS: - Texto fijo seg√∫n c√≥digo de estado - En espa√±ol, legible
                        para usuarios - Coherente con cEstCont siempre - Informaci√≥n oficial SET
                        PROP√ìSITO: - Mostrar en interfaces de usuario - Reportes e impresiones
                        legibles - Logs descriptivos - Comunicaci√≥n con usuarios finales VALIDACI√ìN
                        AUTOM√ÅTICA: - Debe corresponder exactamente con cEstCont - Texto est√°ndar
                        sin variaciones EJEMPLO: "Activo" </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- Tipo de contribuyente -->
            <xs:element name="cTipCont" type="tns:tipoCodigoTipoContribuyente">
                <xs:annotation>
                    <xs:documentation> C√≥digo del tipo de contribuyente seg√∫n clasificaci√≥n SET
                        VALORES POSIBLES: - 1: Persona f√≠sica (trabajador independiente,
                        profesional) - 2: Persona jur√≠dica (empresa, sociedad, organizaci√≥n)
                        IMPLICACIONES LEGALES: - Tipo 1: R√©gimen fiscal de persona f√≠sica - Tipo 2:
                        R√©gimen fiscal de persona jur√≠dica INMUTABILIDAD: - El tipo no cambia
                        frecuentemente - Requiere gesti√≥n administrativa para modificar - Define
                        r√©gimen fiscal aplicable USO EN DOCUMENTOS: - Determina campos obligatorios
                        en documentos electr√≥nicos - Influye en validaciones espec√≠ficas - Afecta
                        c√°lculos de impuestos EJEMPLO: 2 (Persona Jur√≠dica) </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- Descripci√≥n del tipo -->
            <xs:element name="dDesTipCont" type="tns:tipoDescripcionTipoContribuyente">
                <xs:annotation>
                    <xs:documentation> Descripci√≥n textual del tipo de contribuyente VALORES
                        CORRESPONDIENTES: - "Persona F√≠sica": Para cTipCont = 1 - "Persona
                        Jur√≠dica": Para cTipCont = 2 CARACTER√çSTICAS: - Texto fijo seg√∫n c√≥digo de
                        tipo - En espa√±ol, legible para usuarios - Coherente con cTipCont siempre -
                        Terminolog√≠a oficial SET PROP√ìSITO: - Mostrar en interfaces de usuario -
                        Reportes e impresiones legibles - Documentaci√≥n y auditor√≠a - Clasificaci√≥n
                        descriptiva VALIDACI√ìN AUTOM√ÅTICA: - Debe corresponder exactamente con
                        cTipCont - Texto est√°ndar sin variaciones EJEMPLO: "Persona Jur√≠dica" </xs:documentation>
                </xs:annotation>
            </xs:element>

            <!-- Fecha de actualizaci√≥n del estado -->
            <xs:element name="dFecActEst" type="tns:tipoFechaActualizacionEstado">
                <xs:annotation>
                    <xs:documentation> Fecha de la √∫ltima actualizaci√≥n del estado del contribuyente
                        CARACTER√çSTICAS: - Tipo: Date (solo fecha, sin hora) - Formato: YYYY-MM-DD
                        (ISO 8601) - Refleja √∫ltima modificaci√≥n oficial en SET - Inmutable hasta
                        nueva actualizaci√≥n administrativa PROP√ìSITO: - Determinar antig√ºedad del
                        estado actual - Auditor√≠a de cambios de estado - Validar vigencia de
                        informaci√≥n - Control temporal de estados CASOS DE USO: - Verificar recencia
                        de la informaci√≥n - Determinar si consultar nuevamente - Auditor√≠a de
                        cambios administrativos - Cache con validez temporal INTERPRETACI√ìN: - Fecha
                        reciente: Estado probablemente estable - Fecha antigua: Estado consolidado -
                        M√∫ltiples cambios recientes: Situaci√≥n en revisi√≥n VALIDACI√ìN: - No puede
                        ser fecha futura - Debe ser coherente con existencia del RUC - Formato
                        estricto YYYY-MM-DD EJEMPLO: 2024-01-15 (actualizado el 15 de enero de 2024)
                        IMPLEMENTACI√ìN CACHE: ```python def es_info_valida(fecha_actualizacion:
                        date) -> bool: # Considerar v√°lida si actualizaci√≥n es reciente
                        dias_desde_actualizacion = (date.today() - fecha_actualizacion).days return
                        dias_desde_actualizacion (mayoIgual que) 30 # 30 d√≠as de validez ``` </xs:documentation>
                </xs:annotation>
            </xs:element>

        </xs:sequence>
    </xs:complexType>

    <!-- ===================================================================== -->
    <!-- TIPOS SIMPLES AUXILIARES                                             -->
    <!-- ===================================================================== -->

    <!-- Tipo para timestamp de procesamiento RUC -->
    <xs:simpleType name="tipoTimestampProcesamientoRUC">
        <xs:annotation>
            <xs:documentation> Tipo para fecha y hora de procesamiento de consulta RUC
                CARACTER√çSTICAS: - Base: dateTime con timezone obligatorio - Timezone:
                America/Asuncion (-03:00 o -04:00) - Precisi√≥n: Segundos (sin milisegundos) -
                Formato: YYYY-MM-DDThh:mm:ss¬±TZ VALIDACI√ìN: - Debe incluir timezone v√°lido - No
                puede ser fecha futura - Formato ISO 8601 estricto </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:dateTime">
            <xs:pattern value="\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}[+-]\d{2}:\d{2}" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para c√≥digo de resultado RUC -->
    <xs:simpleType name="tipoCodigoResultadoRUC">
        <xs:annotation>
            <xs:documentation> C√≥digo espec√≠fico del resultado de consulta RUC C√ìDIGOS V√ÅLIDOS: -
                0420: Consulta exitosa, RUC encontrado - 0430: RUC no encontrado en padrones - 05xx:
                Errores de autenticaci√≥n - 06xx: Errores de validaci√≥n - 99xx: Errores t√©cnicos
                temporales FORMATO: - 4 d√≠gitos num√©ricos exactos - Sin espacios ni caracteres
                especiales </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:pattern value="[0-9]{4}" />
            <xs:length value="4" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para mensaje de resultado RUC -->
    <xs:simpleType name="tipoMensajeResultadoRUC">
        <xs:annotation>
            <xs:documentation> Mensaje descriptivo del resultado de consulta RUC CARACTER√çSTICAS: -
                Texto en espa√±ol - Longitud variable 10-200 caracteres - Sin informaci√≥n sensible -
                Coherente con c√≥digo de resultado </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:minLength value="10" />
            <xs:maxLength value="200" />
            <xs:whiteSpace value="collapse" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para RUC del contribuyente -->
    <xs:simpleType name="tipoRUCContribuyente">
        <xs:annotation>
            <xs:documentation> RUC del contribuyente en response (confirmaci√≥n) CARACTER√çSTICAS: -
                Exactamente 8 d√≠gitos num√©ricos - Sin separadores ni espacios - Debe coincidir con
                RUC del request </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:pattern value="[0-9]{8}" />
            <xs:length value="8" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para d√≠gito verificador del contribuyente -->
    <xs:simpleType name="tipoDigitoVerificadorContribuyente">
        <xs:annotation>
            <xs:documentation> D√≠gito verificador del contribuyente (confirmaci√≥n) CARACTER√çSTICAS:
                - 1 d√≠gito num√©rico (0-9) - Debe coincidir con DV del request - Validaci√≥n m√≥dulo 11 </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:pattern value="[0-9]" />
            <xs:length value="1" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para nombre del contribuyente -->
    <xs:simpleType name="tipoNombreContribuyente">
        <xs:annotation>
            <xs:documentation> Nombre o raz√≥n social oficial del contribuyente CARACTER√çSTICAS: -
                Longitud: 4-200 caracteres - Alfanum√©rico con espacios permitidos - Seg√∫n registro
                oficial en padrones SET - Incluye denominaciones completas </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:minLength value="4" />
            <xs:maxLength value="200" />
            <xs:whiteSpace value="collapse" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para c√≥digo de estado del contribuyente -->
    <xs:simpleType name="tipoCodigoEstadoContribuyente">
        <xs:annotation>
            <xs:documentation> C√≥digo del estado del contribuyente en SET VALORES V√ÅLIDOS: - 1:
                Activo - 2: Suspendido - 3: Cancelado - 4: Bloqueado </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:positiveInteger">
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
            <xs:enumeration value="3" />
            <xs:enumeration value="4" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para descripci√≥n del estado -->
    <xs:simpleType name="tipoDescripcionEstadoContribuyente">
        <xs:annotation>
            <xs:documentation> Descripci√≥n textual del estado del contribuyente VALORES FIJOS: -
                "Activo" - "Suspendido" - "Cancelado" - "Bloqueado" </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="Activo" />
            <xs:enumeration value="Suspendido" />
            <xs:enumeration value="Cancelado" />
            <xs:enumeration value="Bloqueado" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para c√≥digo de tipo de contribuyente -->
    <xs:simpleType name="tipoCodigoTipoContribuyente">
        <xs:annotation>
            <xs:documentation> C√≥digo del tipo de contribuyente seg√∫n SET VALORES V√ÅLIDOS: - 1:
                Persona F√≠sica - 2: Persona Jur√≠dica </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:positiveInteger">
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para descripci√≥n del tipo -->
    <xs:simpleType name="tipoDescripcionTipoContribuyente">
        <xs:annotation>
            <xs:documentation> Descripci√≥n textual del tipo de contribuyente VALORES FIJOS: -
                "Persona F√≠sica" - "Persona Jur√≠dica" </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="Persona F√≠sica" />
            <xs:enumeration value="Persona Jur√≠dica" />
        </xs:restriction>
    </xs:simpleType>

    <!-- Tipo para fecha de actualizaci√≥n de estado -->
    <xs:simpleType name="tipoFechaActualizacionEstado">
        <xs:annotation>
            <xs:documentation> Fecha de √∫ltima actualizaci√≥n del estado (solo fecha, sin hora)
                FORMATO: YYYY-MM-DD VALIDACI√ìN: No puede ser fecha futura </xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:date">
            <xs:pattern value="\d{4}-\d{2}-\d{2}" />
        </xs:restriction>
    </xs:simpleType>

    <!-- ===================================================================== -->
    <!-- TIPOS PARA AN√ÅLISIS Y DEBUGGING                                      -->
    <!-- ===================================================================== -->

    <!-- Tipo auxiliar para an√°lisis de response RUC -->
    <xs:complexType name="tipoAnalisisResponseRUC">
        <xs:annotation>
            <xs:documentation> Tipo auxiliar para an√°lisis program√°tico de responses RUC USOS: -
                Parsing automatizado de respuestas - Clasificaci√≥n de resultados por estado -
                Testing automatizado de casos - Generaci√≥n de reportes y estad√≠sticas - An√°lisis de
                calidad de datos NO INCLUIR EN RESPONSES REALES Solo para an√°lisis interno y
                desarrollo </xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="exitoso" type="xs:boolean">
                <xs:annotation>
                    <xs:documentation> Indica si la consulta fue exitosa true: dCodRes = 0420 (RUC
                        encontrado) false: cualquier otro c√≥digo </xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="rucEncontrado" type="xs:boolean">
                <xs:annotation>
                    <xs:documentation> Indica si el RUC fue encontrado true: dCodRes = 0420 false:
                        dCodRes = 0430 o error </xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="contribuyenteActivo" type="xs:boolean" minOccurs="0">
                <xs:annotation>
                    <xs:documentation> Indica si el contribuyente est√° activo true: cEstCont = 1
                        false: cEstCont ‚â† 1 Solo presente si RUC encontrado </xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="categoriaResultado" type="xs:string">
                <xs:annotation>
                    <xs:documentation> Categor√≠a del resultado para m√©tricas Valores:
                        "encontrado_activo", "encontrado_inactivo", "no_encontrado",
                        "error_validacion", "error_autenticacion", "error_tecnico" </xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="tiempoRespuesta" type="xs:duration" minOccurs="0">
                <xs:annotation>
                    <xs:documentation> Tiempo de respuesta del servicio Para m√©tricas de performance </xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
    </xs:complexType>

    <!-- Tipo para m√©tricas de uso RUC -->
    <xs:complexType name="tipoMetricasConsultaRUC">
        <xs:annotation>
            <xs:documentation> M√©tricas espec√≠ficas para consultas de RUC PROP√ìSITO: - An√°lisis de
                patrones de consulta - Optimizaci√≥n de performance - Monitoreo de uso del servicio -
                Reportes de contribuyentes m√°s consultados - An√°lisis de calidad de datos </xs:documentation>
        </xs:annotation>
        <xs:sequence>
            <xs:element name="tipoContribuyenteMasConsultado" type="tns:tipoCodigoTipoContribuyente"
                minOccurs="0">
                <xs:annotation>
                    <xs:documentation>Tipo de contribuyente m√°s consultado</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="estadoMasFrecuente" type="tns:tipoCodigoEstadoContribuyente"
                minOccurs="0">
                <xs:annotation>
                    <xs:documentation>Estado m√°s frecuente en consultas</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="antiguedadPromedio" type="xs:int" minOccurs="0">
                <xs:annotation>
                    <xs:documentation>D√≠as promedio desde √∫ltima actualizaci√≥n de estado</xs:documentation>
                </xs:annotation>
            </xs:element>
            <xs:element name="origenConsulta" type="xs:string" minOccurs="0">
                <xs:annotation>
                    <xs:documentation>Origen de la consulta: "validacion_previa",
                        "verificacion_contraparte", "integracion"</xs:documentation>
                </xs:annotation>
            </xs:element>
        </xs:sequence>
    </xs:complexType>

</xs:schema>