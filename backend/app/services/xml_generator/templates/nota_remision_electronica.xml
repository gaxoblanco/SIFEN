{# ===================================================================== #}
{# TEMPLATE: NOTA DE REMISI√ìN ELECTR√ìNICA MODULAR (iTipDE = 7) #}
{# ===================================================================== #}
{#
PROP√ìSITO: Template Jinja2 modular para Nota de Remisi√≥n Electr√≥nica usando partials
TIPO SIFEN: iTipDE = 7 (Nota de remisi√≥n electr√≥nica)
BASE: Extiende base_document.xml (usa partials autom√°ticamente)
VALIDACI√ìN: Compatible con DE_v150.xsd

NUEVA ARQUITECTURA MODULAR:
‚úÖ base_document.xml maneja toda la estructura com√∫n
‚úÖ Partials se incluyen autom√°ticamente desde base
‚úÖ Este template solo maneja campos espec√≠ficos de NRE
‚úÖ Reducci√≥n de c√≥digo: ~2,500+ ‚Üí 150 l√≠neas (94% menos)

CARACTER√çSTICAS CR√çTICAS NRE:
‚ö†Ô∏è Datos de transporte OBLIGATORIOS
‚ö†Ô∏è Totales monetarios = 0 (no hay venta, solo traslado)
‚ö†Ô∏è Informaci√≥n de veh√≠culos y conductores
‚ö†Ô∏è Direcciones de origen y destino

CASOS DE USO NRE:
üéØ Traslado entre sucursales
üéØ Entrega de mercader√≠a vendida
üéØ Devoluci√≥n de productos
üéØ Traslado para reparaci√≥n/mantenimiento
üéØ Redistribuci√≥n de inventario
üéØ Env√≠o a consignaci√≥n

PARTIALS INCLUIDOS AUTOM√ÅTICAMENTE:
‚úÖ _grupo_operacion.xml (gOpeDE) - tipo_documento = "7"
‚úÖ _grupo_timbrado.xml (gTimb)
‚úÖ _grupo_datos_generales.xml (gDatGralOpe)
‚úÖ _grupo_emisor.xml (gEmis)
‚úÖ _grupo_receptor.xml (gDatRec)
‚úÖ _grupo_items.xml (gCamItem - loop autom√°tico, precios = 0)
‚úÖ _grupo_totales.xml (gTotSub - todos los totales = 0)
‚úÖ _grupo_transporte.xml (gCamTrans - OBLIGATORIO para NRE)
‚úÖ _grupo_condiciones.xml (gCamGen - condicional)

SOLO CAMPOS ESPEC√çFICOS NRE:
üéØ gDtipDE > gCamNRE (motivo traslado espec√≠fico)
üéØ gCamTrans (transporte OBLIGATORIO - viene de partial)

VARIABLES REQUERIDAS:
- cdc: CDC de 44 caracteres
- tipo_documento: "7" (autom√°tico)
- datos_nre: objeto con motivo traslado espec√≠fico
- transporte: objeto OBLIGATORIO con datos completos de transporte

COMPARACI√ìN L√çNEAS DE C√ìDIGO:
‚ùå Versi√≥n tradicional: ~2,500+ l√≠neas (todo duplicado)
‚úÖ Versi√≥n modular: 150 l√≠neas (solo espec√≠fico NRE)
üìä Reducci√≥n: 94% menos c√≥digo
#}

{# Extiende el template base que maneja estructura com√∫n y partials #}
{% extends "base_document.xml" %}

{# ===================================================================== #}
{# BLOQUE: CONTENIDO ESPEC√çFICO NOTA DE REMISI√ìN ELECTR√ìNICA #}
{# Sobrescribe document_specific_content del base_document.xml #}
{# ===================================================================== #}
{% block document_specific_content %}

{# ================================================================= #}
{# GRUPO: gDtipDE - Campos espec√≠ficos por tipo de documento #}
{# Solo contiene gCamNRE espec√≠fico para Nota de Remisi√≥n #}
{# ================================================================= #}
<gDtipDE> {# ============================================================= #} {# SUB-GRUPO: gCamNRE
    - Campos espec√≠ficos Nota de Remisi√≥n #} {# OBLIGATORIO para iTipDE = 7 #} {# √önico contenido
    que no est√° en partials reutilizables #} {#
    ============================================================= #} <gCamNRE> {# E600 - Motivo del
    traslado (OBLIGATORIO) #} {# 1=Venta, 2=Traslado entre establecimientos, 3=Consignaci√≥n,
    4=Devoluci√≥n, 5=Importaci√≥n/Exportaci√≥n, 6=Otros #} <iMotTras>{{ datos_nre.motivo_traslado }}</iMotTras>
    {# E601 - Descripci√≥n del motivo del traslado (OBLIGATORIO) #} <dDesMotTras>{{
    datos_nre.descripcion_motivo }}</dDesMotTras> {# E602 - Observaciones del traslado (OPCIONAL) #}
    {% if datos_nre.observaciones_traslado %} <dObsTraslado>{{ datos_nre.observaciones_traslado }}</dObsTraslado>
    {% endif %} {# E603 - Usuario responsable del traslado (OPCIONAL) #} {% if
    datos_nre.usuario_responsable %} <dUsRespTraslado>{{ datos_nre.usuario_responsable }}</dUsRespTraslado>
    {% endif %} {# E604 - Informaci√≥n adicional de trazabilidad (OPCIONAL) #} {% if
    datos_nre.informacion_trazabilidad %} <dInfoTrazTraslado>{{ datos_nre.informacion_trazabilidad
    }}</dInfoTrazTraslado> {% endif %} {# E605 - Fecha estimada de entrega (OPCIONAL) #} {% if
    datos_nre.fecha_estimada_entrega %} <dFecEstEntrega>{{ datos_nre.fecha_estimada_entrega }}</dFecEstEntrega>
    {% endif %} {# E606 - N√∫mero de orden de traslado (OPCIONAL) #} {% if
    datos_nre.numero_orden_traslado %} <dNumOrdenTraslado>{{ datos_nre.numero_orden_traslado }}</dNumOrdenTraslado>
    {% endif %} {# E607 - Tipo de operaci√≥n log√≠stica (OPCIONAL) #} {% if
    datos_nre.tipo_operacion_logistica %} <iTipOpLogistica>{{ datos_nre.tipo_operacion_logistica }}</iTipOpLogistica>
    {% endif %} {# E608 - Descripci√≥n tipo operaci√≥n log√≠stica (OPCIONAL) #} {% if
    datos_nre.descripcion_operacion_logistica %} <dDesTipOpLogistica>{{
    datos_nre.descripcion_operacion_logistica }}</dDesTipOpLogistica> {% endif %} </gCamNRE>
</gDtipDE>
{# ================================================================= #}
{# TODOS LOS DEM√ÅS GRUPOS SE INCLUYEN AUTOM√ÅTICAMENTE #}
{# desde base_document.xml usando partials: #}
{# #}
{# ‚úÖ gOpeDE: _grupo_operacion.xml (tipo_documento = "7") #}
{# ‚úÖ gTimb: _grupo_timbrado.xml #}
{# ‚úÖ gDatGralOpe: _grupo_datos_generales.xml #}
{# ‚úÖ gEmis: _grupo_emisor.xml #}
{# ‚úÖ gDatRec: _grupo_receptor.xml #}
{# ‚úÖ gCamItem: _grupo_items.xml (loop items - precios = 0) #}
{# ‚úÖ gTotSub: _grupo_totales.xml (todos los totales = 0) #}
{# ‚úÖ gCamTrans: _grupo_transporte.xml (OBLIGATORIO para NRE) #}
{# ‚úÖ gCamGen: _grupo_condiciones.xml (si condiciones) #}
{# ‚úÖ gCamFuFD: _grupo_qr.xml (si include_qr) #}
{# #}
{# NOTAS ESPEC√çFICAS NRE: #}
{# - Items con cantidades normales pero precios = 0 #}
{# - Todos los totales monetarios = 0 #}
{# - Transporte es OBLIGATORIO y completo #}
{# - Emisor/receptor pueden ser el mismo (traslado interno) #}
{# ================================================================= #}

{% endblock %}